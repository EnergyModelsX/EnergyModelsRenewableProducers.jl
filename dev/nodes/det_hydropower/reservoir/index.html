<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Hydro reservoir node · EnergyModelsRenewableProducers</title><meta name="title" content="Hydro reservoir node · EnergyModelsRenewableProducers"/><meta property="og:title" content="Hydro reservoir node · EnergyModelsRenewableProducers"/><meta property="twitter:title" content="Hydro reservoir node · EnergyModelsRenewableProducers"/><meta name="description" content="Documentation for EnergyModelsRenewableProducers."/><meta property="og:description" content="Documentation for EnergyModelsRenewableProducers."/><meta property="twitter:description" content="Documentation for EnergyModelsRenewableProducers."/><script data-outdated-warner src="../../../assets/warner.js"></script><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.050/juliamono.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.16.8/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL="../../.."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../../../assets/documenter.js"></script><script src="../../../search_index.js"></script><script src="../../../siteinfo.js"></script><script src="../../../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../../assets/themes/catppuccin-mocha.css" data-theme-name="catppuccin-mocha"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../../assets/themes/catppuccin-macchiato.css" data-theme-name="catppuccin-macchiato"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../../assets/themes/catppuccin-frappe.css" data-theme-name="catppuccin-frappe"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../../assets/themes/catppuccin-latte.css" data-theme-name="catppuccin-latte"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../../assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../../../assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><div class="docs-package-name"><span class="docs-autofit"><a href="../../../">EnergyModelsRenewableProducers</a></span></div><button class="docs-search-query input is-rounded is-small is-clickable my-2 mx-auto py-1 px-2" id="documenter-search-query">Search docs (Ctrl + /)</button><ul class="docs-menu"><li><a class="tocitem" href="../../../">Home</a></li><li><span class="tocitem">Manual</span><ul><li><a class="tocitem" href="../../../manual/quick-start/">Quick Start</a></li><li><a class="tocitem" href="../../../manual/simple-example/">Examples</a></li><li><a class="tocitem" href="../../../manual/NEWS/">Release notes</a></li></ul></li><li><span class="tocitem">Nodes</span><ul><li><a class="tocitem" href="../../nondisres/">Non-dispatchable RES</a></li><li><a class="tocitem" href="../../hydropower/">Simple Hydropower</a></li><li><input class="collapse-toggle" id="menuitem-3-3" type="checkbox" checked/><label class="tocitem" for="menuitem-3-3"><span class="docs-label">Detailed hydropower</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../description/">Detailed hydropower</a></li><li class="is-active"><a class="tocitem" href>Hydro reservoir node</a><ul class="internal"><li><a class="tocitem" href="#nodes-det_hydro_power-reservoir-fields"><span>Introduced type and its field</span></a></li><li><a class="tocitem" href="#nodes-det_hydro_power-reservoir-math"><span>Mathematical description</span></a></li></ul></li><li><a class="tocitem" href="../generator/">Hydro generator node</a></li><li><a class="tocitem" href="../pump/">Hydro pump node</a></li><li><a class="tocitem" href="../gate/">Hydro gate node</a></li></ul></li><li><a class="tocitem" href="../../battery/">Battery</a></li></ul></li><li><span class="tocitem">How to</span><ul><li><a class="tocitem" href="../../../how-to/update-models/">Update models</a></li><li><a class="tocitem" href="../../../how-to/contribute/">Contribute to EnergyModelsRenewableProducers</a></li></ul></li><li><span class="tocitem">Library</span><ul><li><a class="tocitem" href="../../../library/public/">Public</a></li><li><input class="collapse-toggle" id="menuitem-5-2" type="checkbox"/><label class="tocitem" for="menuitem-5-2"><span class="docs-label">Internals</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../../library/internals/types-EMRP/">Types</a></li><li><a class="tocitem" href="../../../library/internals/methods-fields/">Methods - Accessing fields</a></li><li><a class="tocitem" href="../../../library/internals/methods-EMRP/">Methods - Internal</a></li><li><a class="tocitem" href="../../../library/internals/methods-EMB/">Methods - <code>EnergyModelsBase</code></a></li></ul></li></ul></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><a class="docs-sidebar-button docs-navbar-link fa-solid fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a><nav class="breadcrumb"><ul class="is-hidden-mobile"><li><a class="is-disabled">Nodes</a></li><li><a class="is-disabled">Detailed hydropower</a></li><li class="is-active"><a href>Hydro reservoir node</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>Hydro reservoir node</a></li></ul></nav><div class="docs-right"><a class="docs-navbar-link" href="https://github.com/EnergyModelsX/EnergyModelsRenewableProducers.jl" title="View the repository on GitHub"><span class="docs-icon fa-brands"></span><span class="docs-label is-hidden-touch">GitHub</span></a><a class="docs-navbar-link" href="https://github.com/EnergyModelsX/EnergyModelsRenewableProducers.jl/blob/main/docs/src/nodes/det_hydropower/reservoir.md" title="Edit source on GitHub"><span class="docs-icon fa-solid"></span></a><a class="docs-settings-button docs-navbar-link fa-solid fa-gear" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-article-toggle-button fa-solid fa-chevron-up" id="documenter-article-toggle-button" href="javascript:;" title="Collapse all docstrings"></a></div></header><article class="content" id="documenter-page"><h1 id="nodes-det_hydro_power-reservoir"><a class="docs-heading-anchor" href="#nodes-det_hydro_power-reservoir">Hydro reservoir node</a><a id="nodes-det_hydro_power-reservoir-1"></a><a class="docs-heading-anchor-permalink" href="#nodes-det_hydro_power-reservoir" title="Permalink"></a></h1><h2 id="nodes-det_hydro_power-reservoir-fields"><a class="docs-heading-anchor" href="#nodes-det_hydro_power-reservoir-fields">Introduced type and its field</a><a id="nodes-det_hydro_power-reservoir-fields-1"></a><a class="docs-heading-anchor-permalink" href="#nodes-det_hydro_power-reservoir-fields" title="Permalink"></a></h2><p>The <a href="../../../library/public/#EnergyModelsRenewableProducers.HydroReservoir"><code>HydroReservoir</code></a> nodes represents a water storage in a hydropower system. In its simplest form, the <a href="../../../library/public/#EnergyModelsRenewableProducers.HydroGenerator"><code>HydroGenerator</code></a> and <a href="../../../library/public/#EnergyModelsRenewableProducers.HydroPump"><code>HydroPump</code></a> can convert potential energy between <a href="../../../library/public/#EnergyModelsRenewableProducers.HydroReservoir"><code>HydroReservoir</code></a> nodes at different head levels to electricity, under the assumption that the reservoirs have constant head levels. In these cases, the <a href="../../../library/public/#EnergyModelsRenewableProducers.HydroReservoir"><code>HydroReservoir</code></a> node does not require a description of the relation between volume level and head level. For more detailed modelling, this relation is required to account for the increased power output when the head level difference between reservoirs increase. Head-dependencies are currently not implemented.</p><div class="admonition is-warning"><header class="admonition-header">Spillage</header><div class="admonition-body"><p>The <a href="../../../library/public/#EnergyModelsRenewableProducers.HydroReservoir"><code>HydroReservoir</code></a> nodes do not include a spillage variable. To avoid infeasible solutions, all reservoir nodes should be connected to a <a href="../../../library/public/#EnergyModelsRenewableProducers.HydroGate"><code>HydroGate</code></a> node representing a water way for spillage in case of full reservoirs.</p></div></div><h3 id="nodes-det_hydro_power-reservoir-fields-stand"><a class="docs-heading-anchor" href="#nodes-det_hydro_power-reservoir-fields-stand">Standard fields</a><a id="nodes-det_hydro_power-reservoir-fields-stand-1"></a><a class="docs-heading-anchor-permalink" href="#nodes-det_hydro_power-reservoir-fields-stand" title="Permalink"></a></h3><p>The <a href="../../../library/public/#EnergyModelsRenewableProducers.HydroReservoir"><code>HydroReservoir</code></a> nodes builds on the <a href="https://energymodelsx.github.io/EnergyModelsBase.jl/stable/library/public/nodes/#EnergyModelsBase.RefStorage"><code>RefStorage</code></a> node type. The tandard fields are given as:</p><ul><li><strong><code>id</code></strong>:<br/>The field <code>id</code> is only used for providing a name to the node. This is similar to the approach utilized in <code>EnergyModelsBase</code>.</li><li><strong><code>vol::EMB.UnionCapacity</code></strong>:<br/>The installed volume corresponds to the total water volume storage capacity of the reservoir. It is equivalent to the field <code>level</code> in a <a href="https://energymodelsx.github.io/EnergyModelsBase.jl/stable/library/public/nodes/#EnergyModelsBase.RefStorage"><code>RefStorage</code></a> node.<div class="admonition is-success"><header class="admonition-header">Change of name</header><div class="admonition-body"><p>The storage field level is renamed as a hydro reservoir is described by both the level (the height of the water column in the reservoir) and the storage volume (the volume of water stored). This results in consistency in terminology with existing hydro power models.</p></div></div></li><li><strong><code>stor_res::ResourceCarrier</code></strong>:<br/>The resource that is stored in the reservoir. This <strong>must</strong> be the reserource representing water. The resource <strong>must</strong> consistent for all components in the watercourse.</li><li><strong><code>data::Vector{Data}</code></strong>:<br/>An entry for providing additional data to the model.<div class="admonition is-info"><header class="admonition-header">Additional constraints</header><div class="admonition-body"><p>The <code>data</code> field can be used to add minimum, maximum, and schedule constraints on the storage volume using the general <em><a href="../description/#nodes-det_hydro_power-phil-con">constraints types</a></em>.</p></div></div></li></ul><h3 id="nodes-det_hydro_power-reservoir-fields-new"><a class="docs-heading-anchor" href="#nodes-det_hydro_power-reservoir-fields-new">Additional fields</a><a id="nodes-det_hydro_power-reservoir-fields-new-1"></a><a class="docs-heading-anchor-permalink" href="#nodes-det_hydro_power-reservoir-fields-new" title="Permalink"></a></h3><p><a href="../../../library/public/#EnergyModelsRenewableProducers.HydroReservoir"><code>HydroReservoir</code></a> nodes add a single additional field compared to a <a href="https://energymodelsx.github.io/EnergyModelsBase.jl/stable/library/public/nodes/#EnergyModelsBase.RefStorage"><code>RefStorage</code></a>, and does not include the <code>charge</code> field since charge/discharge capacity is given through the <a href="../../../library/public/#EnergyModelsRenewableProducers.HydroGenerator"><code>HydroGenerator</code></a>, <a href="../../../library/public/#EnergyModelsRenewableProducers.HydroPump"><code>HydroPump</code></a>, and <a href="../../../library/public/#EnergyModelsRenewableProducers.HydroGate"><code>HydroGate</code></a>:</p><ul><li><strong><code>vol_inflow::TimeProfile</code></strong>:<br/>The water inflow rate to the reservoir. The inflow is representing the potential <em>water</em> flowing into the reservoir in each operational period. It is depending on rivers flowing into the reservoir or rainfall. It can be provided as <code>OperationalProfile</code>.</li></ul><h2 id="nodes-det_hydro_power-reservoir-math"><a class="docs-heading-anchor" href="#nodes-det_hydro_power-reservoir-math">Mathematical description</a><a id="nodes-det_hydro_power-reservoir-math-1"></a><a class="docs-heading-anchor-permalink" href="#nodes-det_hydro_power-reservoir-math" title="Permalink"></a></h2><p>The mathematical description is similar to the <a href="https://energymodelsx.github.io/EnergyModelsBase.jl/stable/library/public/nodes/#EnergyModelsBase.RefStorage"><code>RefStorage</code></a> nodes except that the inflow is added to the storage balance.</p><h3 id="nodes-det_hydro_power-reservoir-math-var"><a class="docs-heading-anchor" href="#nodes-det_hydro_power-reservoir-math-var">Variables</a><a id="nodes-det_hydro_power-reservoir-math-var-1"></a><a class="docs-heading-anchor-permalink" href="#nodes-det_hydro_power-reservoir-math-var" title="Permalink"></a></h3><h4 id="nodes-det_hydro_power-reservoir-math-var-stand"><a class="docs-heading-anchor" href="#nodes-det_hydro_power-reservoir-math-var-stand">Standard variables</a><a id="nodes-det_hydro_power-reservoir-math-var-stand-1"></a><a class="docs-heading-anchor-permalink" href="#nodes-det_hydro_power-reservoir-math-var-stand" title="Permalink"></a></h4><p><a href="../../../library/public/#EnergyModelsRenewableProducers.HydroReservoir"><code>HydroReservoir</code></a> nodes utilize all standard variables from <a href="https://energymodelsx.github.io/EnergyModelsBase.jl/stable/library/public/nodes/#EnergyModelsBase.RefStorage"><code>RefStorage</code></a>, as described on the page <em><a href="https://energymodelsx.github.io/EnergyModelsBase.jl/stable/manual/optimization-variables/#man-opt_var">Optimization variables</a></em>.</p><ul><li><a href="https://energymodelsx.github.io/EnergyModelsBase.jl/stable/manual/optimization-variables/#man-opt_var-opex"><span>$\texttt{opex\_var}$</span></a></li><li><a href="https://energymodelsx.github.io/EnergyModelsBase.jl/stable/manual/optimization-variables/#man-opt_var-opex"><span>$\texttt{opex\_fixed}$</span></a></li><li><a href="https://energymodelsx.github.io/EnergyModelsBase.jl/stable/manual/optimization-variables/#man-opt_var-cap"><span>$\texttt{stor\_level}$</span></a></li><li><a href="https://energymodelsx.github.io/EnergyModelsBase.jl/stable/manual/optimization-variables/#man-opt_var-cap"><span>$\texttt{stor\_level\_inst}$</span></a></li><li><a href="https://energymodelsx.github.io/EnergyModelsBase.jl/stable/manual/optimization-variables/#man-opt_var-cap"><span>$\texttt{stor\_charge\_use}$</span></a></li><li><a href="https://energymodelsx.github.io/EnergyModelsBase.jl/stable/manual/optimization-variables/#man-opt_var-cap"><span>$\texttt{stor\_discharge\_use}$</span></a></li><li><a href="https://energymodelsx.github.io/EnergyModelsBase.jl/stable/manual/optimization-variables/#man-opt_var-flow"><span>$\texttt{flow\_in}$</span></a></li><li><a href="https://energymodelsx.github.io/EnergyModelsBase.jl/stable/manual/optimization-variables/#man-opt_var-flow"><span>$\texttt{flow\_out}$</span></a></li><li><a href="https://energymodelsx.github.io/EnergyModelsBase.jl/stable/manual/optimization-variables/#man-opt_var-cap"><span>$\texttt{stor\_level\_Δ\_op}$</span></a></li><li><a href="https://energymodelsx.github.io/EnergyModelsBase.jl/stable/manual/optimization-variables/#man-opt_var-cap"><span>$\texttt{stor\_level\_Δ\_rp}$</span></a> if the <code>TimeStruct</code> includes <code>RepresentativePeriods</code></li></ul><p>It will however not use the vaeriables <span>$\texttt{stor\_charge\_inst}$</span> and <span>$\texttt{stor\_discharge\_inst}$</span> as the charge and discharge capacities are handled by the connected <a href="../../../library/public/#EnergyModelsRenewableProducers.HydroGenerator"><code>HydroGenerator</code></a>, <a href="../../../library/public/#EnergyModelsRenewableProducers.HydroPump"><code>HydroPump</code></a>, and <a href="../../../library/public/#EnergyModelsRenewableProducers.HydroGate"><code>HydroGate</code></a>.</p><h4 id="nodes-det_hydro_power-reservoir-math-add"><a class="docs-heading-anchor" href="#nodes-det_hydro_power-reservoir-math-add">Additional variables</a><a id="nodes-det_hydro_power-reservoir-math-add-1"></a><a class="docs-heading-anchor-permalink" href="#nodes-det_hydro_power-reservoir-math-add" title="Permalink"></a></h4><p><a href="../../../library/public/#EnergyModelsRenewableProducers.HydroReservoir"><code>HydroReservoir</code></a> nodes add additional variables if required by the <em><a href="../description/#nodes-det_hydro_power-phil-con">additional constraints</a></em>:</p><ul><li><span>$\texttt{rsv\_vol\_penalty\_up}[n, t]$</span>: Variable for penalizing violation of the volume constraint in direction <em>up</em> in <code>HydroReservoir</code> node <span>$n$</span> in operational period <span>$t$</span> with a typical unit of <span>$Mm^3$</span>.<br/><em>Up</em> implies in this case that the reservoir volume is larger than planned.</li><li><span>$\texttt{rsv\_vol\_penalty\_down}[n, t]$</span>: Variable for penalizing violation of the volume constraint in direction <em>down</em> in <code>HydroReservoir</code> node <span>$n$</span> in operational period <span>$t$</span> with a typical unit of <span>$Mm^3$</span>.<br/><em>Down</em> implies in this case that the reservoir volume is smaller than planned.</li></ul><h3 id="nodes-det_hydro_power-reservoir-math-con"><a class="docs-heading-anchor" href="#nodes-det_hydro_power-reservoir-math-con">Constraints</a><a id="nodes-det_hydro_power-reservoir-math-con-1"></a><a class="docs-heading-anchor-permalink" href="#nodes-det_hydro_power-reservoir-math-con" title="Permalink"></a></h3><p>The following sections omit the direct inclusion of the vector of <a href="../../../library/public/#EnergyModelsRenewableProducers.HydroReservoir"><code>HydroReservoir</code></a> nodes. Instead, it is implicitly assumed that the constraints are valid <span>$\forall n ∈ N$</span> for all <a href="../../../library/public/#EnergyModelsRenewableProducers.HydroReservoir"><code>HydroReservoir</code></a> types if not stated differently. In addition, all constraints are valid <span>$\forall t \in T$</span> (that is in all operational periods) or <span>$\forall t_{inv} \in T^{Inv}$</span> (that is in all strategic periods).</p><h4 id="nodes-det_hydro_power-reservoir-math-con-stand"><a class="docs-heading-anchor" href="#nodes-det_hydro_power-reservoir-math-con-stand">Standard constraints</a><a id="nodes-det_hydro_power-reservoir-math-con-stand-1"></a><a class="docs-heading-anchor-permalink" href="#nodes-det_hydro_power-reservoir-math-con-stand" title="Permalink"></a></h4><p><a href="../../../library/public/#EnergyModelsRenewableProducers.HydroReservoir"><code>HydroReservoir</code></a> nodes utilize in general the standard constraints described in <em><a href="https://energymodelsx.github.io/EnergyModelsBase.jl/stable/nodes/storage/#nodes-storage-math-con">Constraint functions for <code>Storage</code> nodes</a></em>. The majority of these constraints are hence ommitted in the following description. Specifically, the <em><a href="https://energymodelsx.github.io/EnergyModelsBase.jl/stable/nodes/storage/#nodes-storage-math-con-level">level constraints</a></em> are created using the same functions.</p><p>The function <code>constraints_opex_var</code> requires a new method as we have to include the penalty variables for violating the constraints if required:</p><p class="math-container">\[\begin{aligned}
  \texttt{opex\_var}&amp;[n, t_{inv}] = \\
    \sum_{t \in t_{inv}} \Big( &amp; opex\_var(level(n), t) \times \texttt{stor\_level}[n, t] + \\ &amp;
    opex\_var(charge(n), t) \times \texttt{stor\_charge\_use}[n, t] + \\ &amp;
    opex\_var(discharge(n), t) \times \texttt{stor\_discharge\_use}[n, t] \\ &amp;
    penalty(c_{up}, t) \times \texttt{rsv\_vol\_penalty\_up}[n, t]+ \\ &amp;
    penalty(c_{down}, t) \times \texttt{rsv\_vol\_penalty\_down}[n, t] \Big) \times scale\_op\_sp(t_{inv}, t)
\end{aligned}\]</p><p>where <span>$penalty()$</span> returns the penalty value for violation of constraints with penalty variables in the upward and downward direction, denoted by <span>$c_{up}$</span> and  <span>$c_{down}$</span>.</p><div class="admonition is-success"><header class="admonition-header">The function `scale_op_sp`</header><div class="admonition-body"><p>The function <a href="https://energymodelsx.github.io/EnergyModelsBase.jl/stable/library/public/functions/#EnergyModelsBase.scale_op_sp"><span>$scale\_op\_sp(t_{inv}, t)$</span></a> calculates the scaling factor between operational and strategic periods. It also takes into account potential operational scenarios and their probability as well as representative periods.</p></div></div><p>The energy balance in <code>constraints_level_aux</code> is altered to include the inflow to the reservoir:</p><p class="math-container">\[\begin{aligned}
  \texttt{stor\_level\_Δ\_op}&amp;[n, t] = \\ &amp;
  vol\_inflow(n, t) + \texttt{stor\_charge\_use}[n, t] - \texttt{stor\_discharge\_use}[n, t]
\end{aligned}\]</p><p>The new method adds furthermore <em><a href="../description/#nodes-det_hydro_power-phil-con">additional constraints</a></em>, if the corresponding types are provided in the <code>Data</code> field. Soft constraints, <em>i.e.</em>, constraints with a penalty, are used if the constraints have non-infinite penalty values. The mathematical formulation of the constraints are:</p><ol><li><p>Minumum constraints for the reservoir level:</p><p class="math-container">\[\begin{aligned}
   \texttt{stor\_level}[n, t] \geq &amp; capacity(level(n), t) \times value(c, t) \qquad &amp; \forall c \in C^{min} \\
   \texttt{stor\_level}[n, t] + &amp; \texttt{rsv\_vol\_penalty\_up}[n, t] \geq \\ &amp;
   capacity(level(n), t) * value(c, t) \qquad &amp; \forall c \in C^{min}
\end{aligned}\]</p></li><li><p>Maximum constraints for the reservoir level:</p><p class="math-container">\[\begin{aligned}
 \texttt{stor\_level}[n, t] \leq &amp; capacity(level(n), t) \times value(c, t) \qquad &amp; \forall c \in C^{max} \\
 \texttt{stor\_level}[n, t] - &amp; \texttt{rsv\_vol\_penalty\_down}[n, t] \leq \\ &amp;
 capacity(level(n), t) \times value(c, t) \qquad &amp; \forall c \in C^{max}
\end{aligned}\]</p></li><li><p>Scheduling constraints for the reservoir level:</p><p class="math-container">\[\begin{aligned}
 \texttt{stor\_level}[n, t] = &amp; capacity(level(n), t) \times value(c, t) \quad &amp; \forall c \in C^{sch} \\
 \texttt{stor\_level}[n, t] + &amp; \texttt{rsv\_vol\_penalty\_up}[n, t] - \texttt{rsv\_vol\_penalty\_down}[n, t] = \\ &amp;
 capacity(level(n), t) \times value(c, t) \quad &amp; \forall c \in C^{sch} \\
\end{aligned}\]</p></li></ol><p>where <span>$value(c,t)$</span> returns the relative limit of constraint <code>c</code> and  <span>$capacity(n,t)$</span> returns the installed capacity of node <code>n</code>. The sets <span>$C^{min}$</span>,<span>$C^{max}$</span> and <span>$C^{sch}$</span> contain additional minimum, maximum, and scheduling constraints, repectively.</p><h4 id="nodes-det_hydro_power-reservoir-math-con-add"><a class="docs-heading-anchor" href="#nodes-det_hydro_power-reservoir-math-con-add">Additional constraints</a><a id="nodes-det_hydro_power-reservoir-math-con-add-1"></a><a class="docs-heading-anchor-permalink" href="#nodes-det_hydro_power-reservoir-math-con-add" title="Permalink"></a></h4><p>The <code>HydroReservoir</code> nodes do not include any additional constraints other than through dispatching on <em><a href="https://energymodelsx.github.io/EnergyModelsBase.jl/stable/nodes/storage/#nodes-storage-math-con">Constraint functions for <code>Storage</code> nodes</a></em> as described above.</p></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../description/">« Detailed hydropower</a><a class="docs-footer-nextpage" href="../generator/">Hydro generator node »</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="auto">Automatic (OS)</option><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option><option value="catppuccin-latte">catppuccin-latte</option><option value="catppuccin-frappe">catppuccin-frappe</option><option value="catppuccin-macchiato">catppuccin-macchiato</option><option value="catppuccin-mocha">catppuccin-mocha</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 1.8.0 on <span class="colophon-date" title="Monday 16 December 2024 15:25">Monday 16 December 2024</span>. Using Julia version 1.11.2.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
