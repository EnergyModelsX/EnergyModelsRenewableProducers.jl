<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Detailed hydropower · EnergyModelsRenewableProducers</title><meta name="title" content="Detailed hydropower · EnergyModelsRenewableProducers"/><meta property="og:title" content="Detailed hydropower · EnergyModelsRenewableProducers"/><meta property="twitter:title" content="Detailed hydropower · EnergyModelsRenewableProducers"/><meta name="description" content="Documentation for EnergyModelsRenewableProducers."/><meta property="og:description" content="Documentation for EnergyModelsRenewableProducers."/><meta property="twitter:description" content="Documentation for EnergyModelsRenewableProducers."/><script data-outdated-warner src="../../../assets/warner.js"></script><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.050/juliamono.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.16.8/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL="../../.."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../../../assets/documenter.js"></script><script src="../../../search_index.js"></script><script src="../../../siteinfo.js"></script><script src="../../../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../../assets/themes/catppuccin-mocha.css" data-theme-name="catppuccin-mocha"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../../assets/themes/catppuccin-macchiato.css" data-theme-name="catppuccin-macchiato"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../../assets/themes/catppuccin-frappe.css" data-theme-name="catppuccin-frappe"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../../assets/themes/catppuccin-latte.css" data-theme-name="catppuccin-latte"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../../assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../../../assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><div class="docs-package-name"><span class="docs-autofit"><a href="../../../">EnergyModelsRenewableProducers</a></span></div><button class="docs-search-query input is-rounded is-small is-clickable my-2 mx-auto py-1 px-2" id="documenter-search-query">Search docs (Ctrl + /)</button><ul class="docs-menu"><li><a class="tocitem" href="../../../">Home</a></li><li><span class="tocitem">Manual</span><ul><li><a class="tocitem" href="../../../manual/quick-start/">Quick Start</a></li><li><a class="tocitem" href="../../../manual/simple-example/">Examples</a></li><li><a class="tocitem" href="../../../manual/NEWS/">Release notes</a></li></ul></li><li><span class="tocitem">Nodes</span><ul><li><a class="tocitem" href="../../nondisres/">Non-dispatchable RES</a></li><li><a class="tocitem" href="../../hydropower/">Simple Hydropower</a></li><li><input class="collapse-toggle" id="menuitem-3-3" type="checkbox" checked/><label class="tocitem" for="menuitem-3-3"><span class="docs-label">Detailed hydropower</span><i class="docs-chevron"></i></label><ul class="collapsed"><li class="is-active"><a class="tocitem" href>Detailed hydropower</a><ul class="internal"><li><a class="tocitem" href="#nodes-det_hydro_power-phil"><span>Philosophy of the detailed hydropower nodes</span></a></li><li><a class="tocitem" href="#nodes-det_hydro_power-phil-pq"><span>Conversion to/from electric energy: the power-discharge relationship</span></a></li><li><a class="tocitem" href="#nodes-det_hydro_power-phil-con"><span>Additional constraints</span></a></li><li><a class="tocitem" href="#nodes-det_hydro_power-phil-wv"><span>End-value setting of water</span></a></li></ul></li><li><a class="tocitem" href="../reservoir/">Hydro reservoir node</a></li><li><a class="tocitem" href="../generator/">Hydro generator node</a></li><li><a class="tocitem" href="../pump/">Hydro pump node</a></li><li><a class="tocitem" href="../gate/">Hydro gate node</a></li></ul></li><li><a class="tocitem" href="../../battery/">Battery</a></li></ul></li><li><span class="tocitem">How to</span><ul><li><a class="tocitem" href="../../../how-to/update-models/">Update models</a></li><li><a class="tocitem" href="../../../how-to/contribute/">Contribute to EnergyModelsRenewableProducers</a></li></ul></li><li><span class="tocitem">Library</span><ul><li><a class="tocitem" href="../../../library/public/">Public</a></li><li><input class="collapse-toggle" id="menuitem-5-2" type="checkbox"/><label class="tocitem" for="menuitem-5-2"><span class="docs-label">Internals</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../../library/internals/types-EMRP/">Types</a></li><li><a class="tocitem" href="../../../library/internals/methods-fields/">Methods - Accessing fields</a></li><li><a class="tocitem" href="../../../library/internals/methods-EMRP/">Methods - Internal</a></li><li><a class="tocitem" href="../../../library/internals/methods-EMB/">Methods - <code>EnergyModelsBase</code></a></li></ul></li></ul></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><a class="docs-sidebar-button docs-navbar-link fa-solid fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a><nav class="breadcrumb"><ul class="is-hidden-mobile"><li><a class="is-disabled">Nodes</a></li><li><a class="is-disabled">Detailed hydropower</a></li><li class="is-active"><a href>Detailed hydropower</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>Detailed hydropower</a></li></ul></nav><div class="docs-right"><a class="docs-navbar-link" href="https://github.com/EnergyModelsX/EnergyModelsRenewableProducers.jl" title="View the repository on GitHub"><span class="docs-icon fa-brands"></span><span class="docs-label is-hidden-touch">GitHub</span></a><a class="docs-navbar-link" href="https://github.com/EnergyModelsX/EnergyModelsRenewableProducers.jl/blob/main/docs/src/nodes/det_hydropower/description.md" title="Edit source on GitHub"><span class="docs-icon fa-solid"></span></a><a class="docs-settings-button docs-navbar-link fa-solid fa-gear" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-article-toggle-button fa-solid fa-chevron-up" id="documenter-article-toggle-button" href="javascript:;" title="Collapse all docstrings"></a></div></header><article class="content" id="documenter-page"><h1 id="nodes-det_hydro_power"><a class="docs-heading-anchor" href="#nodes-det_hydro_power">Detailed hydropower</a><a id="nodes-det_hydro_power-1"></a><a class="docs-heading-anchor-permalink" href="#nodes-det_hydro_power" title="Permalink"></a></h1><p>Cascaded hydropower systems can be modelled using the <a href="../../../library/public/#EnergyModelsRenewableProducers.HydroReservoir"><code>HydroReservoir</code></a>, <a href="../../../library/public/#EnergyModelsRenewableProducers.HydroGate"><code>HydroGate</code></a>, <a href="../../../library/public/#EnergyModelsRenewableProducers.HydroGenerator"><code>HydroGenerator</code></a>, and <a href="../../../library/public/#EnergyModelsRenewableProducers.HydroPump"><code>HydroPump</code></a> nodes. The nodes can be used in combination to model a detailed hydropower system. Unlike <a href="../../../library/public/#EnergyModelsRenewableProducers.HydroStorage"><code>HydroStorage</code></a>, these nodes allow for modelling of water as a resource that can be stored in reservoirs and moved between reservoirs to generate/consume electricity. The defined node types are:</p><ul><li><a href="../../../library/public/#EnergyModelsRenewableProducers.HydroReservoir"><code>HydroReservoir</code></a> can have water as the stored resource. It is explained in more detail on its <em><a href="../reservoir/#nodes-det_hydro_power-reservoir">nodal page</a></em>.</li><li><a href="../../../library/public/#EnergyModelsRenewableProducers.HydroGenerator"><code>HydroGenerator</code></a> can generate electricity by moving water to a reservoir at a lower altitude or the ocean. It is explained in more detail on its <em><a href="../generator/#nodes-det_hydro_power-generator">nodal page</a></em>.</li><li><a href="../../../library/public/#EnergyModelsRenewableProducers.HydroPump"><code>HydroPump</code></a> can move water to a reservoir at a higher altitude by consuming electricity. It is explained in more detail on its <em><a href="../pump/#nodes-det_hydro_power-pump">nodal page</a></em>.</li><li><a href="../../../library/public/#EnergyModelsRenewableProducers.HydroGate"><code>HydroGate</code></a> can discharge to lower reservoirs without producing electricity, for example due to spillage or environmental restrictions in the water course. It is explained in more detail on its <em><a href="../gate/#nodes-det_hydro_power-gate">nodal page</a></em>.</li></ul><div class="admonition is-warning"><header class="admonition-header">Warning</header><div class="admonition-body"><p>The defined node types have to be used in combination to set up a hydropower system. They should not be used as stand-alone nodes.</p></div></div><h2 id="nodes-det_hydro_power-phil"><a class="docs-heading-anchor" href="#nodes-det_hydro_power-phil">Philosophy of the detailed hydropower nodes</a><a id="nodes-det_hydro_power-phil-1"></a><a class="docs-heading-anchor-permalink" href="#nodes-det_hydro_power-phil" title="Permalink"></a></h2><p>The detailed hydropower nodes provide a flexible means to represent the physics of cascaded hydropower systems. By connecting nodes of different  types, unique systems with optional number of reservoirs, generators, pumps and discharge gates can be modelled.</p><p>The <a href="../../../library/public/#EnergyModelsRenewableProducers.HydroReservoir"><code>HydroReservoir</code></a> node is a storage node used for storing water, while <a href="../../../library/public/#EnergyModelsRenewableProducers.HydroGenerator"><code>HydroGenerator</code></a>, <a href="../../../library/public/#EnergyModelsRenewableProducers.HydroPump"><code>HydroPump</code></a> and <a href="../../../library/public/#EnergyModelsRenewableProducers.HydroGate"><code>HydroGate</code></a> nodes move water around in the system. In addition, <a href="../../../library/public/#EnergyModelsRenewableProducers.HydroGenerator"><code>HydroGenerator</code></a> and <a href="../../../library/public/#EnergyModelsRenewableProducers.HydroPump"><code>HydroPump</code></a> nodes convert potential energy to electric energy and <em>vice versa</em>.</p><p>The detailed modelling of hydropower requires two resources to be defined: a water resource and an electricity resource.  <a href="../../../library/public/#EnergyModelsRenewableProducers.HydroReservoir"><code>HydroReservoir</code></a> and <a href="../../../library/public/#EnergyModelsRenewableProducers.HydroGate"><code>HydroGate</code></a> nodes only use the water resource, while <a href="../../../library/public/#EnergyModelsRenewableProducers.HydroGenerator"><code>HydroGenerator</code></a> and <a href="../../../library/public/#EnergyModelsRenewableProducers.HydroPump"><code>HydroPump</code></a> nodes use both resources.</p><p>The nodes should be connected by <a href="https://energymodelsx.github.io/EnergyModelsBase.jl/stable/library/public/links/#lib-pub-links"><code>links</code></a> to represent the water ways in the system. Links are also used to define flow of electricity in and out of the system through <a href="../../../library/public/#EnergyModelsRenewableProducers.HydroPump"><code>HydroPump</code></a> and <a href="../../../library/public/#EnergyModelsRenewableProducers.HydroGenerator"><code>HydroGenerator</code></a> nodes, respectively.</p><div class="admonition is-danger"><header class="admonition-header">Direct linking required</header><div class="admonition-body"><p>The nodes included in the water way should be connected directly and not through an <a href="https://energymodelsx.github.io/EnergyModelsBase.jl/stable/library/public/nodes/#EnergyModelsBase.Availability"><code>Availability</code></a> node. An availability node can be used to connect electricity resources, but the water resource must be excluded from the availability node to prevent that the availability node is used to move water to reservoirs with higher altitude without consuming electricity.</p></div></div><div class="admonition is-danger"><header class="admonition-header">Reservoir input and output required</header><div class="admonition-body"><p>All nodes must have both input and output. Therefore, a <a href="https://energymodelsx.github.io/EnergyModelsBase.jl/stable/library/public/nodes/#EnergyModelsBase.RefSource"><code>RefSource</code></a> node with capacity 0 should be connected to the reservoir at the top of the water course. Similarly, the water transported through the hydropower system requires a final destination. The ocean, or similar final destination, should be represented as a <a href="https://energymodelsx.github.io/EnergyModelsBase.jl/stable/library/public/nodes/#EnergyModelsBase.RefSink"><code>RefSink</code></a> with the water resource as input an no surplus penalty. This way, it can accept any amount of water.</p></div></div><div class="admonition is-warning"><header class="admonition-header">Detailed hydropower nodes and investment models</header><div class="admonition-body"><p>The current implementation of nodes described below does not allow their usage in capacity expansion models. This is checked through the function <code>EMB.check_node_data</code> in the <code>EnergyModelsInvestments</code> extension.</p></div></div><p>Some of the node types has similar functionality and use some of the same code. The following, describes some general functionality before a more detailed description of the nodes are provided.</p><p>The illustration below shows a typical hydropower system where the dotted lines illustrate the links between the nodes.</p><p><img src="../detailed-hydropower-illustration.svg" alt="Detailed hydropower example topology."/></p><h2 id="nodes-det_hydro_power-phil-pq"><a class="docs-heading-anchor" href="#nodes-det_hydro_power-phil-pq">Conversion to/from electric energy: the power-discharge relationship</a><a id="nodes-det_hydro_power-phil-pq-1"></a><a class="docs-heading-anchor-permalink" href="#nodes-det_hydro_power-phil-pq" title="Permalink"></a></h2><p>The conversion between energy stored in the water resources in the hydropower system and electric energy is described by a power-discharge relationship. The conversion process in the <a href="../../../library/public/#EnergyModelsRenewableProducers.HydroGenerator"><code>HydroGenerator</code></a> and <a href="../../../library/public/#EnergyModelsRenewableProducers.HydroPump"><code>HydroPump</code></a> nodes are reversed processes and modelled using the same implementation.</p><p>The conversion is based on a set of PQ-points that describes the relationship between electric energy (power) and discharge of water, namely how much electric energy that is generated per volume of water discharged per time unit. For a <a href="../../../library/public/#EnergyModelsRenewableProducers.HydroPump"><code>HydroPump</code></a> node, the PQ-points describes how much electric energy the pump consumes per unit of water that is pumped to a higher reservoir, or how much water that is pumped per unit of electric energy consumed. The PQ-points are provided as input through the <code>pq_curve</code> field of the  <a href="../../../library/public/#EnergyModelsRenewableProducers.HydroGenerator"><code>HydroGenerator</code></a> and <a href="../../../library/public/#EnergyModelsRenewableProducers.HydroPump"><code>HydroPump</code></a> nodes.</p><div class="admonition is-info"><header class="admonition-header">Relative `PqPoints`</header><div class="admonition-body"><p>The  <a href="../../../library/public/#EnergyModelsRenewableProducers.PqPoints"><code>PqPoints</code></a> are relative to the installed capacity. This approach makes if possible to freely chose the capacity of the node (provided in the field <code>cap::TimeProfile</code>) to refer to the electricity resource (power capacity) or the water resource (discharge/pump capacity) of the node, depending on the input used when setting up det hydropower system.</p></div></div><div class="admonition is-info"><header class="admonition-header">Energy equivalent</header><div class="admonition-body"><p>Alternatively, a single value representing the energy equivalent can be provided as input in the field <code>pq_curve</code>. By the use of a constuctor, a <a href="../../../library/public/#EnergyModelsRenewableProducers.PqPoints"><code>PqPoints</code></a> struct consisting of a minimum and maximum point is then created based on the energy equvalent. If a single energy equivalent is given as input, the installed capacity (provided in the field <code>cap::TimeProfile</code>) must refer to the power capacity of the <a href="../../../library/public/#EnergyModelsRenewableProducers.HydroGenerator"><code>HydroGenerator</code></a> or <a href="../../../library/public/#EnergyModelsRenewableProducers.HydroPump"><code>HydroPump</code></a> nodes.</p></div></div><h2 id="nodes-det_hydro_power-phil-con"><a class="docs-heading-anchor" href="#nodes-det_hydro_power-phil-con">Additional constraints</a><a id="nodes-det_hydro_power-phil-con-1"></a><a class="docs-heading-anchor-permalink" href="#nodes-det_hydro_power-phil-con" title="Permalink"></a></h2><p>In addition to the constraints describing the physical system, hydropower systems are subject to a wide range of regulatory constraints or self-imposed constraints. Examples for these constraints are to preserve ecological conditions, facilitate multiple use of water (such as for agriculture or recreation), or ensure safe operation before/during maintanance or in the high season for recreational acitivities in the water courses. Often, such constraints can be translated into a schedule, a minimum, or maximum constraint. A general functionality has been implemented for adding such constraints to <a href="../../../library/public/#EnergyModelsRenewableProducers.HydroReservoir"><code>HydroReservoir</code></a>, <a href="../../../library/public/#EnergyModelsRenewableProducers.HydroGate"><code>HydroGate</code></a>, <a href="../../../library/public/#EnergyModelsRenewableProducers.HydroGenerator"><code>HydroGenerator</code></a>, and <a href="../../../library/public/#EnergyModelsRenewableProducers.HydroPump"><code>HydroPump</code></a> nodes. The constraints are optional through the use of the <strong><code>data::Vector{Data}</code></strong> fields.</p><div class="admonition is-info"><header class="admonition-header">ScheduleConstraint scaling</header><div class="admonition-body"><p>ScheduleConstraint inputs are given as values relative to a node capacity. For example, a constraint value 0.5 represents 50% of the node capacity. This makes the use of constraints in investment models possible where the capacity is not known ahead.</p></div></div><ul><li>Minimum constraints (<a href="../../../library/public/#EnergyModelsRenewableProducers.MinSchedule">MinSchedule</a>): hard constraints (absolute) or soft constraints (with a penalty for violation) that restricts the minimum of a variable to a given value (<em>e.g.</em>, discharge, power, reservoir level)</li><li>Maximum constraints (<a href="../../../library/public/#EnergyModelsRenewableProducers.MaxSchedule">MaxSchedule</a>): hard constraints (absolute) or soft constraints (with a penalty for violation) that restricts the maximum of a variable to a given value (<em>e.g.</em>, discharge, power, reservoir level)</li><li>Schedule constraints (<a href="../../../library/public/#EnergyModelsRenewableProducers.EqualSchedule">EqualSchedule</a>): hard constraints (absolute) or soft constraints (with a penalty for violation) that restricts a variable to a given value (<em>e.g.</em>, discharge, power, reservoir level)</li></ul><p>The minimum, maximum, and schedule constraints are subtypes of the abstract type <a href="../../../library/public/#EnergyModelsRenewableProducers.ScheduleConstraint">ScheduleConstraint{T&lt;:AbstractScheduleType}</a>, where new constraints types can be implemeted as subtypes.</p><h2 id="nodes-det_hydro_power-phil-wv"><a class="docs-heading-anchor" href="#nodes-det_hydro_power-phil-wv">End-value setting of water</a><a id="nodes-det_hydro_power-phil-wv-1"></a><a class="docs-heading-anchor-permalink" href="#nodes-det_hydro_power-phil-wv" title="Permalink"></a></h2><p>Scheduling of large reservoirs typically require a method for valuating the future oportunity value of storing water beyond the optimization horizon. This will be included in the EMX receeding horizon package that is under development.</p></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../../hydropower/">« Simple Hydropower</a><a class="docs-footer-nextpage" href="../reservoir/">Hydro reservoir node »</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="auto">Automatic (OS)</option><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option><option value="catppuccin-latte">catppuccin-latte</option><option value="catppuccin-frappe">catppuccin-frappe</option><option value="catppuccin-macchiato">catppuccin-macchiato</option><option value="catppuccin-mocha">catppuccin-mocha</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 1.8.0 on <span class="colophon-date" title="Friday 29 November 2024 13:34">Friday 29 November 2024</span>. Using Julia version 1.11.1.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
